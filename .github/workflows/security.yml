# .github/workflows/security-test.yml
name: Security Test

on:
  workflow_dispatch:  # Manual trigger for testing

jobs:
  basic-security:
    name: Basic Security Check
    runs-on: ubuntu-latest
    permissions:
      security-events: write
      contents: read
      actions: read
    
    steps:
      - name: Checkout
        uses: actions/checkout@v4
        
      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'
          
      - name: Simple Bandit Test
        run: |
          pip install bandit
          bandit --version
          echo "✅ Bandit installed successfully"
          
      - name: Test SARIF Generation
        run: |
          echo '{"version": "2.1.0", "$schema": "https://json.schemastore.org/sarif-2.1.0.json", "runs": [{"tool": {"driver": {"name": "Test"}}, "results": []}]}' > test.sarif
          echo "✅ SARIF file created"
          
      - name: Test Upload
        uses: github/codeql-action/upload-sarif@v3
        with:
          sarif_file: test.sarif
          category: test
